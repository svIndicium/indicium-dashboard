<template>
    <div class="profile">
        <div class="imagecontainer">
            <div v-if="$auth.isAuthenticated && this.user !== null">
                <img v-bind:src="this.user.picture" class="avatar" :alt="this.user.picture">
            </div>
            <div v-else>
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"><g fill="none" fill-rule="evenodd"><path d="M20 0C8.96 0 0 8.96 0 20s8.96 20 20 20 20-8.96 20-20S31.04 0 20 0z" fill="#9e9e9e" fill-rule="nonzero"></path><path d="M20 17.727c2.767 0 5-2.233 5-5s-2.233-5-5-5-5 2.233-5 5 2.233 5 5 5zm0 2.954c-6.11 0-10.908 2.954-10.908 5.681A13.018 13.018 0 0 0 20 32.271c4.552 0 8.598-2.354 10.908-5.909 0-2.727-4.798-5.68-10.908-5.68z" fill="#ececec" fill-rule="nonzero"></path><path d="M0 0h40v40H0z"></path></g></svg>
            </div>
        </div>
        <div v-if="$auth.isAuthenticated && this.user !== null" class="text">
            <div class="name">
                {{user.name}}
            </div>
            <div class="action">
                <a href="#" @click="this.$auth.logout">Log uit</a>
            </div>
        </div>
        <div v-else class="text">
            <div class="action">
                <a @click="this.$auth.loginWithRedirect">Log in</a>
            </div>
        </div>

    </div>
</template>

<script>
    export default {
        name: 'ProfileItem',
        data() {
            return {
                user: null
            }
        },
        async created() {
            this.getUserInfo();
        },
        methods: {
            async getUserInfo() {
                this.user = await this.$auth.getIdTokenClaims();
            }
        }
    };
</script>

<style lang="scss" scoped>

    .profile {
        margin-top: 16px;
        display: flex;
        flex-direction: row;
        align-items: center;
    }

    .avatar {
        height: 40px;
        width: 40px;
        border-radius: 20px;
    }
    .text {
        margin-left: 8px;
    }

    .name {
        height: 20px;
    }

    .action {
        @extend .name;
        cursor: pointer;
    }
</style>
